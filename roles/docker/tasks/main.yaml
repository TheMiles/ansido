---
  - name: Install prerequisites for https repository
    apt: name={{item}} state=installed
    with_items:
      - apt-transport-https
      - ca-certificates
      - curl
      - gnupg2
      - software-properties-common

  - name: Add official docker repository
    apt_repository:
      repo: deb [arch=amd64] https://download.docker.com/linux/debian jessie edge
      filename: docker.list

  - name: Add Key for docker repo
    apt_key:
      url: https://download.docker.com/linux/debian/gpg
      id: 0EBFCD88
 
  - name: Install docker
    apt: name=docker-ce update-cache=yes
 
  - name: get setuptools
    apt: name=python-setuptools state=present
 
  - name: make sure pip works
    shell: easy_install -U pip creates=/usr/local/bin/pip
 
  - name: install docker-py
    pip: name=docker-py state=present
 
  - name: install docker-compose
    pip: name=docker-compose state=present